<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <meta name="description" content="傻瓜也能看懂的百度页码源码">
    <style>
        li {
            list-style: none;
            float: left;
            width: 30px;
            height: 30px;
            line-height: 30px;
            margin: 5px;
            text-align: center;
            background: #333;
            border-radius: 10px;
            cursor: pointer;
            color: lightskyblue;
            transition: all .3s;
            user-select: none;
        }
        
        li:first-child,
        li:last-child {
            width: auto;
            padding: 0 8px;
        }
        
        .active,
        li:hover {
            background: lightskyblue;
            color: white;
        }
    </style>
</head>

<body>
    <ul>
        <li>上一页</li>
        <li class="active">1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
        <li>5</li>
        <li>6</li>
        <li>7</li>
        <li>8</li>
        <li>9</li>
        <li>10</li>
        <li>下一页</li>
    </ul>
    <script>
        let box = document.querySelector('ul');
        let list = box.querySelectorAll('li');
        // 判断第一个页码是否选中, 如选中即隐藏上一页按钮
        list[1].className == 'active' ?
            list[0].style.display = 'none' :
            list[0].style.display = 'block';

        function move() {
            let focus = null; // 设置一个空的变量
            let before = list[0 + 1].innerText;
            // 获取当前状态第一个页码的内容↑
            for (let j = 1; j < list.length - 1; j++) {
                // 循环条件只在页码范围内↑
                if (list[j].className == 'active') {
                    focus = j; // 获取当前选中的页码的位置
                    list[j].className = '';
                    // 取消当前选中状态
                    break; // 结束循环
                }
            } // 判断触发事件的按钮是否为页码内容↓
            if (this.items > 0 && this.items < list.length - 1) {
                this.className = 'active';
                // 为被点击的页码添加选中状态
                focus = this.items; // focus几乎等于下标
                // 将当前选中页码的自定义属性items的值赋给focus
                // console.log(this, focus)
            } else {
                // 判断点击的按钮是否为上一页或下一页↓
                this.items == 0 ?
                    list[--focus].className = 'active' :
                    list[++focus].className = 'active';
            } // ↓当前选中的页码原下标大于6时
            if (focus > 5 + 1) { // 循环(focus-6)次↓
                for (let j = 5 + 1; j < focus; j++) {
                    list[0 + 1].remove(); // 删除第一个页码
                    let add = document.createElement('li'); // 创建一个新节点
                    add.innerText = list[list.length - 1 - 1].innerText * 1 + 1;
                    // 获取当前最后一个页码的内容后转换为数字类型并加一↑
                    // box.append(add); // ← 在父元素的末尾插入节点
                    box.insertBefore(add, list[list.length - 1]);
                    // 在父元素box中的最后一个元素, 即下一页按钮前插入节点add
                    list = box.querySelectorAll('li');
                    // 重新获取修改后的伪数组
                }
            } else if (before > 1) { // 当第一个页码的内容大于1时
                for (let j = list[focus].innerText - before; j < 5; j++) {
                    // 循环5 - (当前选中的页码内容 - 第一个页码的内容) 次↑
                    if (list[1].innerText <= 1) break;
                    // 判断当前第一个页码内容是否为1, 为1即打断循环
                    list[list.length - 1 - 1].remove();
                    // 删除当前最后一个页码
                    let add = document.createElement('li'); // 创建新节点
                    add.innerText = list[0 + 1].innerText * 1 - 1;
                    // 获取第一个页码的内容转换为数字并加一↑
                    // if (add.innerText < 1) break;
                    box.insertBefore(add, list[0 + 1]);
                    // 插入新节点在当前的第一个页码之前, 上一页按钮之后
                    list = box.querySelectorAll('li');
                    // 获取修改后的伪数组
                }
            } // 遍历数组↓
            for (let j = 0; j < list.length; j++) {
                list[j].items = j;
                // 重新为修改后的伪数组元素添加自定义属性
                list[j].onclick = move; // 函数自调用
                // 重新为修改后的伪数组元素绑定点击事件
            }
            // 每次事件触发修改内容后, 都判断一次首个页码是否为选中状态
            list[1].className == 'active' ?
                list[0].style.display = 'none' :
                list[0].style.display = 'block';
            // console.log(this);
        } // 遍历初始数组, 首次调用↓
        for (let i = 0; i < list.length; i++) {
            list[i].items = i;
            // 设置自定义属性的初始值
            list[i].onclick = move;
            // 绑定点击事件
        }
    </script>
</body>

</html>